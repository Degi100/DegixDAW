// ============================================
// FILE BROWSER - FLOATING MODE OPTIMIZATIONS
// Compact, responsive design for floating window
// ============================================

@use '../../abstracts/index' as *;

// ============================================
// FLOATING CONTAINER ADJUSTMENTS
// ============================================

.floating-file-browser-content {
  // Override padding for tighter spacing
  .file-browser {
    margin: 0;
    padding: 0;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
  }

  // Compact header
  .file-browser-header {
    padding: 0.75rem 1rem;
    background: transparent;
    border-bottom: 1px solid $border-color;
  }

  .file-browser-title {
    h2 {
      font-size: 1rem;
      margin: 0;
    }

    .btn-upload-compact {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
  }

  // Compact tabs
  .file-browser-tabs {
    padding: 0.5rem 1rem;
    gap: 0.5rem;

    .tab-btn {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }
  }

  // Compact filters
  .file-browser-filters {
    padding: 0.75rem 1rem;
    gap: 0.75rem;
  }

  .filter-row {
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .filter-label {
    font-size: 0.8125rem;
  }

  .filter-stats {
    font-size: 0.8125rem;
  }

  // Compact type filters
  .type-filters {
    gap: 0.5rem;

    .type-btn {
      padding: 0.375rem 0.75rem;
      font-size: 0.8125rem;
    }
  }

  // Compact view buttons
  .filter-view {
    .view-btn {
      width: 32px;
      height: 32px;
      font-size: 1rem;
    }
  }

  // Compact table view
  .file-browser-table {
    font-size: 0.875rem;

    th {
      padding: 0.625rem 0.75rem;
      font-size: 0.8125rem;
    }

    td {
      padding: 0.625rem 0.75rem;
    }
  }

  .file-name {
    font-size: 0.875rem;
  }

  .file-size,
  .file-date,
  .file-user {
    font-size: 0.8125rem;
  }

  // Compact grid view
  .file-browser-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 0.75rem;
    padding: 0.75rem;
  }

  .file-card {
    padding: 0.75rem;

    .file-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .file-name {
      font-size: 0.8125rem;
    }

    .file-meta {
      font-size: 0.75rem;
      margin-top: 0.25rem;
    }
  }

  // Compact action buttons
  .file-actions {
    gap: 0.25rem;

    button {
      width: 28px;
      height: 28px;
      font-size: 0.875rem;
    }
  }

  // Loading overlay
  .loading-overlay {
    backdrop-filter: blur(2px);
  }
}

// ============================================
// RESPONSIVE BREAKPOINTS FOR FLOATING
// ============================================

// Small floating window (< 600px width)
.floating-file-browser {
  @media (max-width: 600px) {
    .floating-file-browser-content {
      // Hide less important UI elements
      .filter-stats {
        display: none;
      }

      .filter-user {
        width: 100%;
      }

      // Stack filters vertically
      .filter-row {
        flex-direction: column;
        align-items: stretch;
      }

      .filter-left,
      .filter-right {
        width: 100%;
      }

      // Force grid view on very small windows
      .file-browser-table {
        display: none;
      }

      .file-browser-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
    }
  }
}

// Medium floating window (600px - 900px)
@media (min-width: 600px) and (max-width: 900px) {
  .floating-file-browser-content {
    // Reduce grid columns
    .file-browser-grid {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }

    // Hide some table columns
    .file-browser-table {
      .file-type-col,
      .file-user-col {
        display: none;
      }
    }
  }
}

// ============================================
// PINNED MODE ADJUSTMENTS
// ============================================

.floating-file-browser--pinned {
  .floating-file-browser-content {
    // Even more compact when pinned
    .file-browser-header {
      padding: 0.5rem 0.75rem;
    }

    .file-browser-title h2 {
      font-size: 0.9375rem;
    }

    .file-browser-tabs {
      padding: 0.375rem 0.75rem;

      .tab-btn {
        padding: 0.375rem 0.75rem;
        font-size: 0.8125rem;
      }
    }

    .filter-row {
      flex-direction: column;
      gap: 0.5rem;
    }

    // Always use grid view when pinned
    .file-browser-table {
      display: none;
    }

    .file-browser-grid {
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 0.5rem;
      padding: 0.5rem;
    }

    .file-card {
      padding: 0.5rem;

      .file-icon {
        font-size: 1.75rem;
      }

      .file-name {
        font-size: 0.75rem;
      }

      .file-meta {
        font-size: 0.6875rem;
      }
    }
  }
}

// ============================================
// SCROLLBAR STYLING
// ============================================

.floating-file-browser-content {
  // Custom scrollbar for cleaner look
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;

    &:hover {
      background: rgba(0, 0, 0, 0.3);
    }
  }
}

// ============================================
// DARK MODE
// ============================================

[data-theme="dark"] {
  .floating-file-browser-content {
    .file-browser-header {
      border-bottom-color: $dark-border;
    }

    .file-browser-filters {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);

      &:hover {
        background: rgba(255, 255, 255, 0.3);
      }
    }
  }
}
