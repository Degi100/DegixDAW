// ============================================
// ADMIN SYSTEM COMPONENTS
// ============================================

@use '../../abstracts/index' as *;

// ============================================
// SYSTEM HEALTH CARD
// ============================================

.system-health-card {
  background: var(--theme-bg-primary);
  border: 1px solid var(--theme-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--theme-shadow);
  transition: var(--transition);

  &.loading {
    .health-card-body {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 200px;
    }
  }

  .health-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--theme-border);
    background: var(--theme-bg-tertiary);

    h3 {
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--theme-text-primary);
      margin: 0;
    }

    .refresh-button {
      background: transparent;
      border: 1px solid var(--theme-border);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-size: var(--font-size-lg);
      transition: var(--transition);

      &:hover {
        background: var(--theme-bg-primary);
        transform: rotate(180deg);
      }
    }
  }

  .health-card-body {
    padding: var(--spacing-lg);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .health-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--theme-border-light);

    &:last-child {
      border-bottom: none;
    }

    .health-item-label {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      font-size: var(--font-size-base);
      font-weight: 500;
      color: var(--theme-text-primary);
      flex-wrap: wrap;

      .health-icon {
        font-size: var(--font-size-xl);
      }
    }

    .health-value {
      font-size: var(--font-size-sm);
      color: var(--theme-text-secondary);
      font-weight: 600;
    }

    // Token Usage Specific Styles
    &.token-usage {
      flex-direction: column;
      align-items: stretch;
      gap: var(--spacing-sm);

      .health-item-label {
        justify-content: flex-start;
      }

      .token-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--spacing-xs);

        .token-count {
          font-size: var(--font-size-sm);
          color: var(--theme-text-primary);
          font-weight: 600;
        }

        .token-percentage {
          font-size: var(--font-size-xs);
          color: var(--theme-text-secondary);
          font-weight: 700;
        }
      }

      .token-progress {
        width: 100%;
        height: 8px;
        background: var(--theme-border-light);
        border-radius: 999px;
        overflow: hidden;
        position: relative;

        .token-progress-bar {
          height: 100%;
          border-radius: 999px;
          transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                      background 0.3s ease;
          position: relative;

          // Animated gradient effect
          &::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
              90deg,
              transparent,
              rgba(255, 255, 255, 0.2),
              transparent
            );
            animation: shimmer 2s infinite;
          }

          &.success {
            background: linear-gradient(90deg, #10b981, #059669);
          }

          &.caution {
            background: linear-gradient(90deg, #3b82f6, #2563eb);
          }

          &.warning {
            background: linear-gradient(90deg, #f59e0b, #d97706);
          }

          &.danger {
            background: linear-gradient(90deg, #ef4444, #dc2626);
          }
        }
      }
    }
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

// ============================================
// SYSTEM STATS GRID
// ============================================

.system-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-lg);

  @media (max-width: 767px) {
    grid-template-columns: 1fr;
  }

  .stat-card {
    background: var(--theme-bg-primary);
    border: 1px solid var(--theme-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    transition: var(--transition);
    box-shadow: var(--theme-shadow);

    &.loading {
      justify-content: center;
      min-height: 120px;
    }

    &:hover {
      transform: translateY(-2px);
      box-shadow: var(--theme-shadow-lg);
    }

    &.primary {
      border-left: 4px solid var(--primary-color);
    }

    &.success {
      border-left: 4px solid $success;
    }

    &.warning {
      border-left: 4px solid $warning;
    }

    &.danger {
      border-left: 4px solid $danger;
    }

    &.info {
      border-left: 4px solid $info;
    }

    .stat-card-icon {
      font-size: var(--font-size-3xl);
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--theme-bg-tertiary);
      border-radius: var(--radius-md);
    }

    .stat-card-content {
      flex: 1;
      min-width: 0;

      .stat-card-label {
        font-size: var(--font-size-sm);
        color: var(--theme-text-secondary);
        margin-bottom: var(--spacing-xs);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        flex-wrap: wrap;
      }

      .stat-card-value {
        font-size: var(--font-size-2xl);
        font-weight: 700;
        color: var(--theme-text-primary);
        margin-bottom: var(--spacing-xs);
      }

      .stat-card-trend {
        font-size: var(--font-size-xs);
        color: var(--theme-text-tertiary);
      }
    }
  }
}

// ============================================
// RECENT ACTIVITY FEED
// ============================================

.recent-activity-feed {
  background: var(--theme-bg-primary);
  border: 1px solid var(--theme-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--theme-shadow);
  transition: var(--transition);

  .activity-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-lg);
    border-bottom: 1px solid var(--theme-border);
    background: var(--theme-bg-tertiary);

    h3 {
      font-size: var(--font-size-lg);
      font-weight: 700;
      color: var(--theme-text-primary);
      margin: 0;
    }

    .refresh-button {
      background: transparent;
      border: 1px solid var(--theme-border);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-md);
      cursor: pointer;
      font-size: var(--font-size-lg);
      transition: var(--transition);

      &:hover {
        background: var(--theme-bg-primary);
        transform: rotate(180deg);
      }
    }
  }

  .activity-list {
    padding: var(--spacing-md);
    max-height: 500px;
    overflow-y: auto;
  }

  .activity-empty {
    padding: var(--spacing-xl);
    text-align: center;
    color: var(--theme-text-secondary);
  }

  .activity-item {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    border-bottom: 1px solid var(--theme-border-light);
    transition: var(--transition);

    &:last-child {
      border-bottom: none;
    }

    &:hover {
      background: var(--theme-bg-tertiary);
      border-radius: var(--radius-md);
    }

    &.loading {
      justify-content: center;
      padding: var(--spacing-lg);
    }

    .activity-icon {
      font-size: var(--font-size-xl);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--theme-bg-tertiary);
      border-radius: var(--radius-md);
      flex-shrink: 0;
    }

    .activity-content {
      flex: 1;
      min-width: 0;

      .activity-message {
        font-size: var(--font-size-sm);
        color: var(--theme-text-primary);
        margin-bottom: var(--spacing-xs);
        font-weight: 500;
      }

      .activity-timestamp {
        font-size: var(--font-size-xs);
        color: var(--theme-text-tertiary);
      }
    }
  }
}
